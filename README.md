# Amazon S3 のワーク

* このワークは、指定された AWS アカウントと IAM ユーザー/パスワードを使用して実施して下さい。
* ワークの環境は、許可されている期限内でのみ利用可能ですのでご了承ください。
---

## ワークの目的

* Amazon S3 について、下記のユースケースをハンズオンで体験します。
    - S3 バケット内の Web コンテンツを 静的 Web サイトホスティングで配信する

---

### 手順

#### Web コンテンツの用意

1. このリポジトリにある index.html と example.css と new_item1.jpg を手元のパスコンにダウンロードしておきます。

#### S3 バケットの作成

1. AWS マネジメントコンソールにサインインします。

1. コンソールのページの上部で、リージョンとして **東京** を指定して下さい。

1. Amazon S3 のページへ移動します。
    * コンソールのページ上部の **検索**　の入力エリアに `s3` と入力して Enter キーを押します。

1. Amazon S3 のページ左側のメニュー（ナビゲーションメニュー）で **汎用バケット** を選択します。

1. **バケットを作成**　をクリックします。

1. バケット名にユニークな名前を入力します。注意：大文字とアンダースコア不可。ハイフン(-) は可。

1. ページを少し下にスクロールし、**このバケットのブロックパブリックアクセス設定** で **パブリックアクセスをすべて ブロック** のチェックを **解除** します。

1. **現在の設定により、このバケットとバケット内のオブジェクトが公開される可能性があることを承認します。** のチェックを **チェック** します。

1. ページを下にスクロールし、**バケットを作成** を選択します。

#### Web コンテンツのアップロード

1. 汎用バケットの一覧から、作成したバケットの名前のリンクを選択します。

1. **オブジェクト**　タブを選択して、**アップロード** を選択します。

1. **ファイルを追加** を選択し、ダウンロードしておいた  index.html と example.css と new_item1.jpg を選択します。

1. **アップロード** を選択します。

1. **閉じる**　を選択します。

#### バケットポリシーの追加

1. **アクセス許可** タブを選択します。

1. **バケットポリシー** の **編集** を選択します。

1. 下記のポリシーをコピーして貼り付けます。YOUR_BUCKET の部分を作成したバケット名に変更して、**変更の保存** を選択します。

```
{
    "Version": "2012-10-17",
    "Id": "Policy1606716136887",
    "Statement": [
        {
            "Sid": "Stmt1606716135615",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::YOUR_BUCKET/*"
        }
    ]
}
```

1. **この段階でバケット内のコンテンツはパブリックに公開されます。**
   
#### 静的 Web サイトホスティングの設定

1. ページの上側にある **プロパティ** タブを選択します。

1. ページを下にスクロールし、**静的ウェブサイトホスティング** の **編集** を選択します。

1. **静的ウェブサイトホスティング** で **有効にする** を選択します。

1. インデックスドキュメント に **index.html** を入力します。

1. ページの下側にある **変更の保存** を選択します。

1. **静的ウェブサイトホスティング** で **バケットウェブサイトエンドポイント** の URL をコピーして、ブラウザの別のタブでアクセスします。

1. Wen コンテンツが表示されることを確認します。

#### リソースの削除

1. Amazon S3 のページで左側のナビゲーションメニューから **汎用バケット** を選択します。

1. 作成した S3 バケットの左横のラジオボタンを選択します。

1. **空にする**　を選択して、**完全に削除** を入力後、**空にする** を選択します。

1. **終了** を選択します。
   
1. 作成した S3 バケットの左横のラジオボタンを選択します。

1. **削除**　を選択して、バケット名を入力後、**バケットを削除** を選択します。

**以上でワークは終了です。お疲れさまでした！**
   
